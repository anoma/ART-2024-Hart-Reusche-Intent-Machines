\section{Introduction}\label{sec:introduction}

As decentralized financial systems grow in size and complexity there is a need to serve its users more robustly. Whenever such a system is used, there is a goal in the user's mind about what is to be accomplished. Some modern approaches to system design have abstracted out a user's intent into a notion called, appropriately, an \say{intent}. Exactly what an intent is is often left vague, but, broadly, intents ought to encapsulate the desires and conditions that users, or agents operating on their behalf, wish to express within a system, particularly when trading or transferring assets. These intents can range from a trader's desire to swap assets at a favorable exchange rate, to a user's condition to release funds only upon the successful completion of a programmed task, to complex combinations of logical, temporal, and financial stipulations often found in smart contracts and automated marketplaces. In the context of a contract enforcing the existence of a sophisticated institution, such as voting systems or decentralized corporate-like entities, more ambitious intents may express desires related to fairness, efficiency, trade-offs, etc. These intents may be thought of, and sometimes are formulated, as logical formulas about the state of the network.

At the core of the concept of intent is the expression of user preferences guiding automated systems in the execution of complex tasks without direct human supervision. The interpretation and processing of such intents is a difficult task, both from a computational and conceptual standpoint due to the complex web of interactions and contradictions between different user desires. Outcomes ought to be determined by algorithms designed to honor users' wishes as faithfully as possible within the limits of the system's rules. The processing and fulfillment of intents require specialized machinery within blockchain infrastructure, not only to register and interpret the preferences but also to match, execute, or otherwise reconcile them with the current and future states of the system. Algorithms accomplishing this will be implemented by "solvers"; entities operating within a network that users can send intents to for execution. Such solvers, in different forms, would be at the center of many decentralized finance applications, such as automated bartering systems, auction mechanisms, counterparty discovery, etc.

This report attempts to formulate the infrastructure of intents in such a way as to abstract from engineering specifics, enabling us to study intent-processing systems in their most general form. We aim to develop a theoretical framework that illustrates the structure of ``intent machines" that process intents and alter the state of a system. This concept is very abstract and encompasses things that are outside the context of finance or distributed systems. Different intent machines will have different notions of state and intent, but their structure should match a common pattern. Our objective is to distill the essence of intent-handling mechanics to explore how they can compose and interact.

This report begins with the discussion of intent machines in the abstract, where we lay out the fundamental components of such systems: their inputs, their state, and how they transform these elements over time. We formulate these using the abstract notion of a coalgebra. We then give a toy instantiation of an intent machine where intents are relations between the current state and the next state of the network, represented as a natural number. The solver, at each step, picks a new number for the next state in an attempt to maximize the number of satisfied relations in the batch of intents given at that step. The subsequent sections build on these foundations, exploring practical instantiations of intent machines for barter, where the state is the distribution of resources within a network and the intents are auction bids. Different versions of the bid machine are given based on different requirements for the solvers.

Ultimately, these foundations lay the stage for future Anoma work on the game theory of intent solvers. The hope is that this coalgebraic presentation offers a useful and minimal framework to start these investigations. 